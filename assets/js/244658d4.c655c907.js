"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6007],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>m});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=a.createContext({}),i=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},d=function(e){var n=i(e.components);return a.createElement(o.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,s=e.originalType,o=e.parentName,d=p(e,["components","mdxType","originalType","parentName"]),c=i(t),m=r,k=c["".concat(o,".").concat(m)]||c[m]||u[m]||s;return t?a.createElement(k,l(l({ref:n},d),{},{components:t})):a.createElement(k,l({ref:n},d))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var s=t.length,l=new Array(s);l[0]=c;var p={};for(var o in n)hasOwnProperty.call(n,o)&&(p[o]=n[o]);p.originalType=e,p.mdxType="string"==typeof e?e:r,l[1]=p;for(var i=2;i<s;i++)l[i]=t[i];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},7717:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>p,toc:()=>i});var a=t(7462),r=(t(7294),t(3905));const s={sidebar_position:3},l="Express \u6846\u67b6",p={unversionedId:"Node/Express\u4ecb\u7ecd",id:"Node/Express\u4ecb\u7ecd",title:"Express \u6846\u67b6",description:"\u5feb\u901f\u7684\u642d\u5efa\u670d\u52a1\u5668\uff0c\u5e76\u4e14\u5236\u4f5c\u63a5\u53e3\uff0c\u8fde\u63a5\u6570\u636e\u5e93\u3002",source:"@site/docs/8.Node/3.Express\u4ecb\u7ecd.md",sourceDirName:"8.Node",slug:"/Node/Express\u4ecb\u7ecd",permalink:"/demo/docs/Node/Express\u4ecb\u7ecd",draft:!1,editUrl:"https://github.com/Vipers3/demo/docs/8.Node/3.Express\u4ecb\u7ecd.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"\u5305\u7ba1\u7406\u5de5\u5177",permalink:"/demo/docs/Node/\u5305\u7ba1\u7406\u5668"},next:{title:"Ajax",permalink:"/demo/docs/Node/Ajax"}},o={},i=[{value:"Express \u4ecb\u7ecd\u548c\u4f7f\u7528",id:"express-\u4ecb\u7ecd\u548c\u4f7f\u7528",level:2},{value:"\u9759\u6001\u8d44\u6e90\u6258\u7ba1",id:"\u9759\u6001\u8d44\u6e90\u6258\u7ba1",level:3},{value:"\u4f7f\u7528\u8def\u7531",id:"\u4f7f\u7528\u8def\u7531",level:2},{value:"\u58f0\u660e\u5168\u5c40\u8def\u7531",id:"\u58f0\u660e\u5168\u5c40\u8def\u7531",level:3},{value:"\u8def\u7531\u8bed\u6cd5",id:"\u8def\u7531\u8bed\u6cd5",level:3},{value:"\u8bf7\u6c42\u65b9\u5f0f\u548c\u53c2\u6570",id:"\u8bf7\u6c42\u65b9\u5f0f\u548c\u53c2\u6570",level:3},{value:"\u4e8c\u7ea7\u8def\u7531",id:"\u4e8c\u7ea7\u8def\u7531",level:3},{value:"get \u53c2\u6570\u63a5\u6536",id:"get-\u53c2\u6570\u63a5\u6536",level:3},{value:"post \u53c2\u6570\u63a5\u6536",id:"post-\u53c2\u6570\u63a5\u6536",level:3},{value:"\u4e2d\u95f4\u4ef6",id:"\u4e2d\u95f4\u4ef6",level:2},{value:"\u8def\u7531\u5668",id:"\u8def\u7531\u5668",level:2},{value:"\u54cd\u5e94\u5bf9\u8c61",id:"\u54cd\u5e94\u5bf9\u8c61",level:3},{value:"\u8def\u7531\u6848\u4f8b",id:"\u8def\u7531\u6848\u4f8b",level:3},{value:"\u540e\u7aef\u6a21\u677f",id:"\u540e\u7aef\u6a21\u677f",level:2},{value:"\u4f7f\u7528 ejs \u6a21\u677f",id:"\u4f7f\u7528-ejs-\u6a21\u677f",level:3},{value:"\u5176\u4ed6\u8bed\u6cd5",id:"\u5176\u4ed6\u8bed\u6cd5",level:3},{value:"\u4f7f\u7528 template \u6a21\u677f",id:"\u4f7f\u7528-template-\u6a21\u677f",level:3},{value:"\u5176\u4ed6\u8bed\u6cd5",id:"\u5176\u4ed6\u8bed\u6cd5-1",level:3},{value:"\u6848\u4f8b",id:"\u6848\u4f8b",level:2},{value:"\u57fa\u672c\u5e03\u5c40",id:"\u57fa\u672c\u5e03\u5c40",level:3},{value:"\u52a8\u6001\u6e32\u67d3",id:"\u52a8\u6001\u6e32\u67d3",level:3},{value:"\u8df3\u8f6c\u5230\u8be6\u60c5\u9875",id:"\u8df3\u8f6c\u5230\u8be6\u60c5\u9875",level:3},{value:"\u52a8\u6001\u5c55\u793a\u8be6\u60c5",id:"\u52a8\u6001\u5c55\u793a\u8be6\u60c5",level:3}],d={toc:i};function u(e){let{components:n,...s}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,s,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"express-\u6846\u67b6"},"Express \u6846\u67b6"),(0,r.kt)("p",null,"\u5feb\u901f\u7684\u642d\u5efa\u670d\u52a1\u5668\uff0c\u5e76\u4e14\u5236\u4f5c\u63a5\u53e3\uff0c\u8fde\u63a5\u6570\u636e\u5e93\u3002"),(0,r.kt)("h2",{id:"express-\u4ecb\u7ecd\u548c\u4f7f\u7528"},"Express \u4ecb\u7ecd\u548c\u4f7f\u7528"),(0,r.kt)("p",null,"\u4f20\u9001\u95e8: ",(0,r.kt)("a",{parentName:"p",href:"https://www.expressjs.com.cn/"},"https://www.expressjs.com.cn/")),(0,r.kt)("p",null,"\u670d\u52a1\u5668\u7aef\u7684\u5feb\u901f\u5f00\u53d1\u6846\u67b6\uff0c\u57fa\u4e8e\u539f\u751f\u7684 Nodejs \u5c01\u88c5\u7684\uff0c\u80fd\u5feb\u901f\u542f\u52a8\u4e00\u4e2a\u670d\u52a1\u5668\u3002"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"$ npm init -y ")," \u521b\u5efa\u5305\u7ba1\u7406\u6587\u4ef6 \uff08\u8981\u6c42\u9879\u76ee\u76ee\u5f55\u4e0d\u80fd\u53eb\u505a\u4e2d\u6587\uff09"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"$ npm i express -S")," \u5728\u9879\u76ee\u4e2d\u5148\u4e0b\u8f7d"),(0,r.kt)("p",null,"\u5728\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e2d\uff0c\u521b\u5efa app.js \u6587\u4ef6\uff0c\u5982\u679c\u4fee\u6539\u4e86\u4e4b\u540e\u4e00\u5b9a\u8981\u91cd\u542f\u9879\u76ee"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// 1. \u5f15\u5165\u6a21\u5757\nconst express = require("express");\n\n// 2. \u521b\u5efa\u670d\u52a1\u5668\nconst app = express();\n\n// 2.1 \u8bf7\u6c42\u63a5\u53e3\u793a\u4f8b, \u56de\u8c03\u51fd\u6570\u6709\u4e24\u4e2a\u53c2\u6570\n// req: request \u8bf7\u6c42    res: response \u54cd\u5e94\napp.get("/", (req, res) => {\n  // send \u65b9\u6cd5\u662f\u57fa\u4e8eend\u65b9\u6cd5\u5c01\u88c5\u7684\u9ad8\u7ea7\u7684\u54cd\u5e94\u65b9\u6cd5\n  res.send("ok");\n});\n\n// 3. \u8fd0\u884c\u5e76\u6307\u5b9a\u7aef\u53e3\u6302\u8f7d\u670d\u52a1\u5668\napp.listen(5000, function () {\n  console.log("\u670d\u52a1\u8fd0\u884c\u5728 http://127.0.0.1:5000.");\n});\n')),(0,r.kt)("p",null,"\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"$ node app.js ")," \u8fd0\u884c\u670d\u52a1\u5668"),(0,r.kt)("p",null,"\u5982\u679c\u9700\u8981\u81ea\u52a8\u4fdd\u5b58\u5e76\u91cd\u542f\u670d\u52a1\u5668\u5219\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"$ nodemon")," \u4e4b\u540e\u56de\u8f66"),(0,r.kt)("h3",{id:"\u9759\u6001\u8d44\u6e90\u6258\u7ba1"},"\u9759\u6001\u8d44\u6e90\u6258\u7ba1"),(0,r.kt)("p",null,"\u4f20\u7edf\u7684\u539f\u751f\u7684\u6258\u7ba1\u6587\u4ef6\u7684\u65b9\u5f0f\u6bd4\u8f83\u7e41\u7410\uff0c\u9700\u8981\u5927\u91cf\u7684\u5224\u65ad"),(0,r.kt)("p",null,"\u5728 Express \u4e2d\uff0c\u5185\u7f6e\u7684\u4e2d\u95f4\u4ef6\u5904\u7406\u4e86\u6587\u4ef6\u6258\u7ba1\u7684\u529f\u80fd"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// 2.2 \u4f7f\u7528\u5185\u7f6e\u65b9\u6cd5\u76f4\u63a5\u6258\u7ba1\u524d\u7aef\u9879\u76ee\u9759\u6001\u8d44\u6e90\n// use \u4f7f\u7528\u4e2d\u95f4\u4ef6   express.static \u9759\u6001\u8d44\u6e90\u76ee\u5f55\napp.use(express.static("./public"));\n')),(0,r.kt)("h2",{id:"\u4f7f\u7528\u8def\u7531"},"\u4f7f\u7528\u8def\u7531"),(0,r.kt)("p",null,"\u4e00\u822c\u6765\u8bf4\uff0c\u8bbf\u95ee\u9759\u6001\u8d44\u6e90\u4e0d\u9700\u8981\u8d70\u8def\u7531\uff0c\u53ea\u6709\u9700\u8981\u52a8\u6001\u54cd\u5e94\u6570\u636e\u624d\u9700\u8981\u8def\u7531"),(0,r.kt)("p",null,"\u4ee5\u540e\u5f00\u53d1\u65b9\u5f0f\uff1a"),(0,r.kt)("p",null,"\u524d\u540e\u7aef\u4e0d\u5206\u79bb\uff1a\u4e00\u4e2a\u4eba\u5199\u524d\u540e\u7aef\u4e1a\u52a1"),(0,r.kt)("p",null,"\u76ee\u524d\u9636\u6bb5\u7684\u5f00\u53d1\u65b9\u5f0f\uff0c\u6240\u6709\u7684\u8bf7\u6c42\u90fd\u9700\u8981\u5730\u5740\u680f\u6216\u8005 a \u94fe\u63a5\u5b8c\u6210"),(0,r.kt)("p",null,"\u6d4f\u89c8\u5668\u9ed8\u8ba4 url\uff0csrc \u5c5e\u6027\u6807\u7b7e\uff0chref \u5c5e\u6027\u6807\u7b7e\uff0cform \u8868\u5355..."),(0,r.kt)("p",null,"\u524d\u540e\u7aef\u5206\u79bb\uff1a\u524d\u540e\u7aef\u5404\u81ea\u5199\u5404\u81ea\u7684\u4e1a\u52a1"),(0,r.kt)("p",null,"Ajax \u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u5355\u72ec\u53d1\u9001\u8bf7\u6c42"),(0,r.kt)("h3",{id:"\u58f0\u660e\u5168\u5c40\u8def\u7531"},"\u58f0\u660e\u5168\u5c40\u8def\u7531"),(0,r.kt)("p",null,"\u5982\u679c\u76d1\u542c\u4e86\u6839\u8def\u5f84\uff0c\u5219\u914d\u7f6e\u7684 index.html \u8d44\u6e90\u5c31\u8bbf\u95ee\u4e0d\u5230"),(0,r.kt)("p",null,"\u8bb2\u7a76\u5148\u540e\u987a\u5e8f\uff0c\u56e0\u4e3a\u4e00\u6b21\u8bf7\u6c42\u53ea\u80fd\u6709\u4e00\u6b21\u54cd\u5e94\uff0c\u5148\u54cd\u5e94\u7684\u540e\u9762\u7684\u5c31\u4e0d\u4f1a\u6267\u884c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// 2.1 \u8bf7\u6c42\u63a5\u53e3\u793a\u4f8b, \u56de\u8c03\u51fd\u6570\u6709\u4e24\u4e2a\u53c2\u6570\n// req: request \u8bf7\u6c42    res: response \u54cd\u5e94\napp.get("/", (req, res) => {\n  // send \u65b9\u6cd5\u662f\u57fa\u4e8eend\u65b9\u6cd5\u5c01\u88c5\u7684\u9ad8\u7ea7\u7684\u54cd\u5e94\u65b9\u6cd5\n  res.send("ok");\n});\n')),(0,r.kt)("h3",{id:"\u8def\u7531\u8bed\u6cd5"},"\u8def\u7531\u8bed\u6cd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'/*\n    app: \u521b\u5efa\u7684\u670d\u52a1\u5668\u5b9e\u4f8b\n    get\uff1a\u8bf7\u6c42\u7684\u65b9\u6cd5\n        \u53c2\u65701\uff1a \u8bf7\u6c42\u8def\u5f84\n        \u53c2\u65702\uff1a \u56de\u8c03\u51fd\u6570\n            req: request \u5bf9\u8c61, \u91cc\u9762\u8bf7\u6c42\u62a5\u6587\uff0c\u67e5\u8be2\u53c2\u6570\uff0c\u8bf7\u6c42\u5934\uff0c\u8bf7\u6c42\u5934\n            res: response \u5bf9\u8c61\uff0c\u54cd\u5e94\u5934\u8bbe\u7f6e\uff0c\u54cd\u5e94\u5185\u5bb9\u7684\u65b9\u6cd5...\n*/\n\napp.post("/demo", (req, res) => {\n  // \u63a5\u6536\u8bf7\u6c42\u7684\u53c2\u6570\uff0c\u627ereq\u5bf9\u8c61\n  // \u8fd4\u56de\u548c\u54cd\u5e94\u5185\u5bb9\uff0c\u627eres\u5bf9\u8c61\n});\n')),(0,r.kt)("h3",{id:"\u8bf7\u6c42\u65b9\u5f0f\u548c\u53c2\u6570"},"\u8bf7\u6c42\u65b9\u5f0f\u548c\u53c2\u6570"),(0,r.kt)("p",null,"\u5728\u4f20\u7edf\u7684\u524d\u540e\u7aef\u4e0d\u5206\u79bb\u7684\u60c5\u51b5\u4e2d\uff0c\u9ed8\u8ba4\u53d1\u9001\u7684\u8bf7\u6c42\u90fd\u662f get \u8bf7\u6c42"),(0,r.kt)("p",null,"\u53ea\u6709 form \u8868\u5355\u624d\u53ef\u4ee5\u53d1\u9001 post \u8bf7\u6c42\uff0c\u5982\u679c\u8981\u6f14\u793a\u4e0d\u540c\u8bf7\u6c42\uff0c\u5219\u9700\u8981\u4f7f\u7528 from"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- \u4f7f\u7528 form \u8868\u5355\u53d1\u8bf7\u6c42 - \u53ef\u4ee5\u9009\u62e9\u8bf7\u6c42\u65b9\u5f0f --\x3e\n\x3c!-- action: \u63d0\u4ea4\u5730\u5740/\u8def\u5f84  method \u8bf7\u6c42\u65b9\u5f0f --\x3e\n\x3c!-- <form action="/user" method="GET"> --\x3e\n<form action="/user" method="POST">\n  <p>\n    <label> \u7528\u6237\u540d\uff1a <input type="text" /> </label>\n  </p>\n  <p>\n    <label> \u5bc6&emsp;\u7801\uff1a <input type="password" /> </label>\n  </p>\n  <input type="submit" value="\u63d0\u4ea4" />\n</form>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// 2.1 \u8bf7\u6c42\u63a5\u53e3\u793a\u4f8b, \u56de\u8c03\u51fd\u6570\u6709\u4e24\u4e2a\u53c2\u6570\n// req: request \u8bf7\u6c42    res: response \u54cd\u5e94\napp.get("/user", (req, res) => {\n  // send \u65b9\u6cd5\u662f\u57fa\u4e8eend\u65b9\u6cd5\u5c01\u88c5\u7684\u9ad8\u7ea7\u7684\u54cd\u5e94\u65b9\u6cd5\n  res.send("get\u8bf7\u6c42\u6210\u529f\uff01");\n});\n\napp.post("/user", (req, res) => {\n  // send \u65b9\u6cd5\u662f\u57fa\u4e8eend\u65b9\u6cd5\u5c01\u88c5\u7684\u9ad8\u7ea7\u7684\u54cd\u5e94\u65b9\u6cd5\n  res.send("post\u8bf7\u6c42\u6210\u529f\uff01");\n});\n')),(0,r.kt)("p",null,"\u5c06\u6765\u7684\u9879\u76ee\u4e2d\uff0c\u6709\u591a\u5c11\u9700\u6c42\uff0c\u5199\u591a\u5c11\u63a5\u53e3\uff0c\u4e0d\u4f1a\u5199\u6ca1\u7528\u7684\uff0c\u4e5f\u4e0d\u4f1a\u5c11\u5199\u4e24\u4e2a\u3002"),(0,r.kt)("p",null,"\u540e\u7aef\u4f7f\u7528\u8def\u7531\u786e\u5b9a\u5bf9\u5e94\u7684\u65b9\u5f0f\u548c\u6307\u5b9a\u7684\u8def\u5f84\uff0c\u76ee\u7684\u524d\u7aef\u80fd\u6839\u636e\u6307\u5b9a\u7684\u8bf7\u6c42\u65b9\u5f0f\u548c\u8def\u5f84\u53bb\u53d1\u8d77\uff0c\u624d\u80fd\u83b7\u53d6\u5230\u5bf9\u5e94\u7684\u6570\u636e\u3002"),(0,r.kt)("h3",{id:"\u4e8c\u7ea7\u8def\u7531"},"\u4e8c\u7ea7\u8def\u7531"),(0,r.kt)("p",null,"\u5176\u5b9e\u4ee5\u540e\u7684\u4e1a\u52a1\uff0c\u65e0\u975e\u4e5f\u662f\u589e\u5220\u6539\u67e5"),(0,r.kt)("p",null,"\u5bf9\u4e8e\u7528\u6237\u6765\u8bf4\uff0c\u6216\u8005\u5bf9\u4e8e\u5546\u54c1\u6765\u8bf4\uff0c\u6216\u8005\u5bf9\u4e8e\u8ba2\u5355\u6765\u8bf4\u529f\u80fd\u662f\u4e00\u6837\u7684"),(0,r.kt)("p",null,"\u5982\u679c\u4e3a\u4e86\u65b9\u4fbf\u7ba1\u7406\u8def\u7531\uff0c\u4e0d\u5728 app.js \u4e2d\u5927\u91cf\u4e66\u5199\u4ee3\u7801\uff0c\u5c31\u8981\u4f7f\u7528\u5355\u72ec\u7684\u6a21\u5757\u53bb\u7ba1\u7406\u8def\u7531\uff0c\u4e5f\u5c31\u662f\u8981\u628a\u8def\u7531\u62bd\u79bb\u51fa\u53bb\uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u65b9\u4fbf\u7f16\u5199\u548c\u7ef4\u62a4\uff1b"),(0,r.kt)("p",null,"a. \u547d\u540d\u66f4\u52a0\u65b9\u4fbf\uff0c b. \u4e66\u5199\u66f4\u52a0\u65b9\u4fbf"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// \u53d6\u540d   add   \u589e\u52a0   delete \u5220\u9664   edit  \u7f16\u8f91   list  \u67e5\u8be2\n//  /deluser     /editGoods      /orderslist   /editorder\n// \u4ee5\u4e0a\u53d6\u540d\u5b57\u7684\u65b9\u5f0f\uff0c\u5f88\u9ebb\u70e6\uff0c\u5f88\u5bb9\u6613\u9020\u6210\u8bef\u4f1a\uff0c\u540e\u7aef\u538b\u529b\u4e5f\u5927\n\n//   \u4f7f\u7528\u4ee5\u4e0b\u8fd9\u79cd\u65b9\u5f0f\u547d\u540d\u8def\u7531\u7684\u5730\u5740\uff0c\u4f1a\u597d\u7ef4\u62a4\u548c\u8054\u8c03\u4e00\u4e9b\n//   \u4f7f\u7528\u4e24\u7ea7\u7684\u5199\u6cd5\uff0c\u5c31\u662f\u4e8c\u7ea7\u8def\u7531\n//   /user/add   /user/del    /user/edit   /user/list\n//   /goods/add  goods/del    /goods/edit  /goods/list\n\n//   \u4ee5\u4e0a\u662f\u5bf9\u4e8e\u547d\u540d\u4e0a\u7684\u4e00\u4e2a\u533a\u5206, \u5982\u679c\u662f\u4ee5\u8bf7\u6c42\u65b9\u5f0f\u4f5c\u4e3a\u533a\u5206\n//   \u4f20\u7edf\u7684\u65b9\u5f0f\uff0c\u4ee5\u547d\u540d\u4f5c\u4e3a\u529f\u80fd\u7684\u533a\u5206\n//   /user/add   /user/del    /user/edit   /user/list\n//     post         get           post        get\n//   \u65b0\u7684\u63a5\u53e3\u7684\u98ce\u683c  restful \u98ce\u683c\u7684api\n//   /users      /users       /users       /users\n//    post        delete       put          get\n")),(0,r.kt)("p",null,"\u4ee3\u7801\u5b9e\u73b0"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// \u4e00\u822c\u6765\u8bf4\uff0c\u5728index.js \u4e2d\u6ce8\u518c\u7684\u90fd\u662f\u5168\u5c40\u8def\u7531\uff0c\u53ef\u4ee5\u505a\u4e3a\u4e00\u7ea7\u8def\u7531\n\n// 1. \u5f15\u5165 express\nconst express = require("express");\n// 2. \u521b\u5efa\u7ba1\u7406\u4e8c\u7ea7\u8def\u7531\u7684\u6a21\u5757\nconst route = express.Router();\n\n// 3. \u521b\u5efa\u5b50\u8def\u7531\nroute.get("/data", (req, res) => {\n  res.send("\u6570\u636e\u5c55\u793a\u6210\u529f!");\n});\n\n// 4. \u5bfc\u51fa\nmodule.exports = route;\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// 2.3 \u5728app.js \u4e2d\u63a5\u6536\u5e76\u6302\u8f7d\u5b50\u8def\u7531\n// \u53c2\u65701\uff1a\u4e00\u7ea7\u8def\u7531\u540d\u79f0   \u53c2\u65702\uff1a\u5b50\u8def\u7531\u6a21\u5757\napp.use("/", require("./routes/index.jsx"));\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// \u5176\u4ed6\u7684\u8def\u7531\u6587\u4ef6\u91cc\u9762\u4e00\u822c\u90fd\u662f\u4e8c\u7ea7\u8def\u7531\n\n// 1. \u5f15\u5165 express\nconst express = require("express");\n// 2. \u521b\u5efa\u7ba1\u7406\u4e8c\u7ea7\u8def\u7531\u7684\u6a21\u5757\nconst route = express.Router();\n\n// 3. \u521b\u5efa\u5b50\u8def\u7531\nroute.get("/add", (req, res) => {\n  res.send("\u6570\u636e\u6dfb\u52a0\u6210\u529f!");\n});\n\n// 4. \u5bfc\u51fa\nmodule.exports = route;\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// \u56e0\u4e3a\u5728\u6ce8\u518c\u7684\u65f6\u5019\u6dfb\u52a0\u4e86\u4e00\u7ea7\u8def\u524d\u7f00\uff0c\u6240\u4ee5\u8bbf\u95ee\u63a5\u53e3\u5fc5\u987b\u662f  /users/add\napp.use("/users", require("./routes/users.js"));\n')),(0,r.kt)("h3",{id:"get-\u53c2\u6570\u63a5\u6536"},"get \u53c2\u6570\u63a5\u6536"),(0,r.kt)("p",null,"\u4e0d\u540c\u7684\u8bf7\u6c42\uff0c\u4f1a\u643a\u5e26\u4e0d\u540c\u7684\u6570\u636e\uff0c\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u4f20\u9012\uff0c\u5c31\u8981\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u63a5\u6536"),(0,r.kt)("p",null,"\u65b9\u5f0f 1\uff1a get \u8bf7\u6c42\uff0c\u5982\u679c\u662f\u8868\u5355\u643a\u5e26\u6570\u636e\uff0c\u4f1a\u4ee5\u660e\u6587\u65b9\u5f0f\u5728\u5730\u5740\u680f\u4f20\u8f93"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- username=chenweiting&passwod=abc123 --\x3e\n\x3c!-- \u8fd9\u79cd\u6570\u636e\u683c\u5f0f\u7684MIME\u7c7b\u578b\u5c31\u662f application/x-www-form-urlencoded --\x3e\n\x3c!-- \u4e00\u5b9a\u8981\u52a0\u4e0aname\u5c5e\u6027\uff0c\u4e0d\u7136\u6ca1\u6709\u5339\u914d\u7684\u952e --\x3e\n<form action="/data" method="get">\n  <p>\n    <label> \u7528\u6237\u540d\uff1a <input type="text" name="username" /> </label>\n  </p>\n  <p>\n    <label> \u5bc6&emsp;\u7801\uff1a <input type="password" name="password" /> </label>\n  </p>\n  <input type="submit" value="\u63d0\u4ea4" />\n</form>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// \u5ba2\u6237\u7aef\u4f20\u8fc7\u6765\u7684\u6570\u636e\uff0c\u90fd\u662f\u5728req\u5bf9\u8c61\u4e2d\n// \u8bf7\u6c42\u7684\u5730\u5740\nconsole.log(req.url);\n// \u8bf7\u6c42\u534f\u8bae\u7684\u7248\u672c\nconsole.log(req.httpVersion);\n// \u8bf7\u6c42\u7684\u65b9\u5f0f\nconsole.log(req.method);\n\n// \u8bf7\u6c42\u7684\u67e5\u8be2\u53c2\u6570\nconsole.log(req.query);\n")),(0,r.kt)("p",null,"\u65b9\u5f0f 2\uff1a \u7ed9\u8def\u7531\u8def\u5f84\u7b80\u5316\u8bf7\u6c42\u4fe1\u606f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<a href="/data/666">\u901a\u8fc7a\u6807\u7b7e\u53d1\u8d77\u8bf7\u6c42</a>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// \u8bf7\u6c42\u7684\u8def\u5f84\u4fe1\u606f\nconsole.log(req.params); // { id: 666 }\n")),(0,r.kt)("p",null,"\u6269\u5c55 - url \u5728\u53d1\u9001\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u9047\u5230\u4e2d\u6587\u4f1a\u81ea\u52a8\u628a\u5b57\u7b26\u8f6c\u6362\u4e3a ASCII \u5b57\u7b26"),(0,r.kt)("p",null,"\u56e0\u4e3a\u8981\u786e\u4fdd\u5728\u901a\u4fe1\u8fc7\u7a0b\u4e2d\uff0c\u4fdd\u8bc1 url \u643a\u5e26\u7684\u5185\u5bb9\u5b8c\u6574\u548c\u51c6\u786e\uff0c\u9632\u6b62\u51fa\u73b0\u4e71\u7801"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// \u8f6c\u7801\nencodeURI('\u9648\u4f1f\u9706')    =>    '%E9%99%88%E4%BC%9F%E9%9C%86'\n// \u89e3\u7801\ndecodeURI('%E9%99%88%E4%BC%9F%E9%9C%86')       =>     '\u9648\u4f1f\u9706'\n")),(0,r.kt)("h3",{id:"post-\u53c2\u6570\u63a5\u6536"},"post \u53c2\u6570\u63a5\u6536"),(0,r.kt)("p",null,"post \u8bf7\u6c42\uff0c\u9700\u8981\u4f7f\u7528 form \u8868\u5355\u53d1\u8d77"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- method \u65b9\u5f0f\u63d0\u4ea4\u7684\u5185\u5bb9\uff0c\u8fd8\u662f\u4ee5 ?k=v&kv \u7684\u683c\u5f0f\u4f20\u5165  --\x3e\n<form action="/data" method="post">...</form>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'/*\n    a. \u56e0\u4e3a post \u8bf7\u6c42\u4e0d\u540c\u4e8eget\u8bf7\u6c42\uff0c\u5728\u5730\u5740\u680f\u4e0a\n    b. post \u8bf7\u6c42\u7684\u5185\u5bb9\u662f\u5728\u8bf7\u6c42\u4f53\u4e2d  form-data\n    c. \u56e0\u4e3a\u8bf7\u6c42\u4f53\u4e2d\u7684\u6570\u636e\u6709\u53ef\u80fd\u5f88\u591a\u4f53\u79ef\u5f88\u5927\uff0c\u6240\u4ee5\u8fd9\u6b21\u8bf7\u6c42\u4e00\u6b21\u6027\u63a5\u6536\u4e0d\u5b8c\n           \u9700\u8981\u4e13\u95e8\u7684\u4e8b\u4ef6\u8fdb\u884c\u76d1\u542c, \u63a5\u6536\u5b8c\u6bd5\u4e4b\u540e\u518d\u8fd4\u56de\n*/\n\n// \u5728 app.js \u4e2d\u63d0\u524d\u6ce8\u518c\u89e3\u6790 post \u8bf7\u6c42\u7684\u4e2d\u95f4\u4ef6\uff0c \u90a3\u4e48\u8bf7\u6c42\u4f53\u7684\u5185\u5bb9\u5c31\u81ea\u52a8\u88ab\u6302\u8f7d\u5230\u4e86 req.body \u4e0a\n// 4. \u5f15\u5165\u5176\u4ed6\u7684\u4e2d\u95f4\u4ef6\nconst bodyParser = require("body-parser");\n// 4.1 \u6ce8\u518c\u4e2d\u95f4\u4ef6\napp.use(bodyParser.urlencoded({ extended: false }));\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// post\u8bf7\u6c42\nroute.post("/data", (req, res) => {\n  // \u8bf7\u6c42\u7684\u65b9\u5f0f\n  // console.log(req.method);\n  // \u5feb\u901f\u89e3\u51b3\uff0c\u4f7f\u7528 express \u63d0\u4f9b\u7684\u6a21\u5757\n  // \u628a urlencoded \u683c\u5f0f\u7684\u6570\u636e\uff0c\u81ea\u52a8\u8f6c\u6362\u4e3a\u5bf9\u8c61\u7684\u65b9\u5f0f\uff0c\u65b9\u4fbf\u4f7f\u7528\n  console.log(req.body);\n\n  res.send("\u6570\u636e\u5c55\u793a\u6210\u529f!");\n});\n')),(0,r.kt)("blockquote",null,(0,r.kt)("h3",{parentName:"blockquote",id:"\u6269\u5c55"},"\u6269\u5c55")),(0,r.kt)("p",null,"\u5168\u5c40\u5b89\u88c5\u9879\u76ee\u751f\u6210\u5668"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"$ npm i express-generator -g")),(0,r.kt)("p",null,"\u5728\u6307\u5b9a\u7684\u76ee\u5f55\u521b\u5efa\u9879\u76ee"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"$ express \u9879\u76ee\u540d\u79f0")),(0,r.kt)("p",null,"\u5148 cd \u8fdb\u9879\u76ee ",(0,r.kt)("inlineCode",{parentName:"p"},"$ npm i ")," \u4e0b\u5305\uff0c\u7136\u540e\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"$ nodemon ")," \u7684\u65b9\u5f0f\u542f\u52a8\u9879\u76ee"),(0,r.kt)("p",null,"\u597d\u5904\uff1a \u4e00\u4e2a\u670d\u52a1\u5668\u7aef\u7684\u9879\u76ee\u518d\u4e5f\u4e0d\u7528\u624b\u52a8\u7684\u521b\u5efa\u4e86\uff0c\u56e0\u4e3a\u81ea\u52a8\u521b\u5efa\u597d\u4e86\uff0c\u76f4\u63a5\u5f00\u59cb\u5199\u63a5\u53e3\u5c31\u53ef\u4ee5\u4e86\uff0c\u5f88\u65b9\u4fbf\u7684\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"express-generator \u9879\u76ee\u76ee\u5f55\n\n- bin\n    \xb7 www   \u867d\u7136\u6ca1\u6709\u540e\u7f00\uff0c\u4f46\u662f\u5176\u5b9e\u672c\u8d28\u4e5f\u662f\u4e00\u4e2ajs\u6587\u4ef6\n- node_modules\n    \xb7 \u7565\n- public\n    \xb7 \u524d\u7aef\u5de5\u4f5c\u533a\uff0c\u5728\u8fd9\u91cc\u521b\u5efa html,css,js,imgs...\n- routes   \u5b50\u8def\u7531\u6a21\u5757\n    \xb7 index.jsx\n    \xb7 user.js\n- views - \u4e13\u95e8\u7684\u6a21\u677f\u89e3\u6790\u53d6\n    \xb7 index.jade  \u81ea\u5e26\u7684\u524d\u7aef\u6587\u4ef6\u6a21\u677f\napp.js  -  \u4e3b\u6587\u4ef6\npackage-lock.json\npackage.json\n    scripts: \u8c03\u8bd5   nodemon \u5b9e\u9645\u542f\u52a8\u7684\u662f bin\u76ee\u5f55\u4e2d\u7684 www\n")),(0,r.kt)("h2",{id:"\u4e2d\u95f4\u4ef6"},"\u4e2d\u95f4\u4ef6"),(0,r.kt)("p",null,"\u4e2d\u95f4\u4ef6\u5df2\u7ecf\u5728\u4e0a\u8ff0\u7684\u64cd\u4f5c\u4e2d\u51fa\u73b0\u4e86\uff0c\u5e76\u4e14\u5927\u91cf\u7684\u4f7f\u7528\u4e86"),(0,r.kt)("p",null,"\u5728\u5b98\u7f51\u4e2d\u7684\u63cf\u8ff0\uff0c\u4e2d\u95f4\u4ef6\u4e00\u5171\u6709 5 \u79cd",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("img",{src:t(9513).Z,width:"563",height:"246"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// 1. \u552f\u4e00\u5185\u7f6e\u7684\u4e2d\u95f4\u4ef6\napp.use(express.static('./public'))\n\n// 2. \u8def\u7531\u7ea7\u522b\u4e2d\u95f4\u4ef6\napp.use('/', require('./routes/index.jsx'))\napp.use('/users', require('./routes/users.js'))\n\n// 3. \u9519\u8bef\u5904\u7406\u4e2d\u95f4\u4ef6\napp.use(function(err, req, res, next) {\n  // \u8bbe\u7f6e\u4e00\u4e9b\u4fe1\u606f\u53ea\u6709\u5728 development \u6a21\u5f0f\u91cc\u9762\u624d\u6709\u4f5c\u7528\n  res.locals.message = err.message;\n  const  = req.app.get('env') === 'development'\n  res.locals.error = bool ? err : {};\n\n  // \u6e32\u67d3\u5bf9\u5e94\u7684\u9519\u8bef\u5904\u7406\u9875\u9762\n  res.status(err.status || 500);\n  res.render('error');\n});\n\n// 4. \u7b2c\u4e09\u65b9\u4e2d\u95f4\u4ef6 ... \u53ef\u80fd\u4f1a\u6709\u5f88\u591a\uff0c\u4f46\u662f\u90fd\u9700\u8981\u4e0b\u8f7d\n// $ npm i cookie-parser -S\nvar cookieParser = require('cookie-parser');\napp.use(cookieParser());\n\n// 5. \u5e94\u7528\u7ea7\u522b\u7684\u4e2d\u95f4\u4ef6\napp.use(function(req, res, next) {\n\n  /*\n    req:    request \u8bf7\u6c42\u5bf9\u8c61\n    res:    response \u54cd\u5e94\u5bf9\u8c61\n    next:   \u4e0b\u4e00\u4e2a - \u7ba1\u9053\u65b9\u6cd5\n  */\n\n  next();\n});\n")),(0,r.kt)("blockquote",null,(0,r.kt)("h4",{parentName:"blockquote",id:"\u4e2d\u95f4\u4ef6\u662f\u4e00\u4e2a\u51fd\u6570\u5fc5\u987b\u8981\u901a\u8fc7-appuse-\u6ce8\u518c"},"\u4e2d\u95f4\u4ef6\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5fc5\u987b\u8981\u901a\u8fc7 app.use \u6ce8\u518c"),(0,r.kt)("p",{parentName:"blockquote"},"\u4e2d\u95f4\u4ef6\uff0c\u5728\u5ba2\u6237\u7aef\u53d1\u8d77\u8bf7\u6c42\u65f6\uff0c\u8def\u7531\u6700\u540e\u76d1\u542c\u5e76\u4e14\u54cd\u5e94\u6570\u636e\uff0c"),(0,r.kt)("p",{parentName:"blockquote"},"\u5728\u54cd\u5e94\u4e4b\u524d\uff0c\u5982\u679c\u9700\u8981\u5bf9 req \u5bf9\u8c61\u6216\u8005 res \u5bf9\u8c61\u8fdb\u884c\u4e00\u4e9b\u63d0\u524d\u7684\u64cd\u4f5c\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e2d\u95f4\u4ef6\u8fdb\u884c\u62e6\u622a\u3002"),(0,r.kt)("p",{parentName:"blockquote"},"next \u51fd\u6570\u5c31\u662f\u5728\u62e6\u622a\u4e4b\u540e\uff0c\u8d77\u5230\u653e\u884c\u5e76\u4e14\u4f20\u53c2\u7684\u6548\u679c\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(8693).Z,width:"825",height:"387"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// 5. \u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u7ea7\u522b\u4e2d\u95f4\u4ef6\n// \u4f5c\u7528\uff0c\u76d1\u542c\u5230post\u8bf7\u6c42\u4e4b\u540e\uff0c\u83b7\u53d6\u8bf7\u6c42\u4f53\u7684\u5185\u5bb9\u518d\u653e\u884c\napp.use((req, res, next) => {\n  if (req.method === "GET") return next();\n\n  // \u63a5\u6536post\u8bf7\u6c42\u7684\u5185\u5bb9\n  let str = "";\n  // 5.1 \u6ce8\u518cdata\u4e8b\u4ef6\uff0c\u63a5\u6536\u56de\u8c03\u7684\u5f62\u53c2\n  req.on("data", (chunk) => {\n    str += chunk;\n  });\n  // 5.2 \u6ce8\u518cend\u4e8b\u4ef6\uff0c\u8bc1\u660e\u6570\u636e\u63a5\u6536\u5b8c\u6bd5\n  req.on("end", () => {\n    // 5.3 \u7ed9 req.body \u7ed1\u5b9a\u6570\u636e\n    req.body = str;\n    // \u5b8c\u6210\u4e4b\u540e\u6210\u529f\u653e\u884c\n    next();\n  });\n});\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'const qs = require("qs");\n\n// post\u8bf7\u6c42\nroute.post("/data", (req, res) => {\n  // \u89e3\u6790 post \u8bf7\u6c42\u4f53\u7684\u5b57\u7b26\u4e3a\u4e00\u4e2a\u5bf9\u8c61\n  console.log(qs.parse(req.body));\n\n  res.send("\u6570\u636e\u5c55\u793a\u6210\u529f!");\n});\n')),(0,r.kt)("h2",{id:"\u8def\u7531\u5668"},"\u8def\u7531\u5668"),(0,r.kt)("h3",{id:"\u54cd\u5e94\u5bf9\u8c61"},"\u54cd\u5e94\u5bf9\u8c61"),(0,r.kt)("p",null,"\u539f\u751f\u7684 NodeJS \u4e2d\uff0c\u4f7f\u7528 res.end \u65b9\u6cd5\u8fd4\u56de\u5185\u5bb9\uff0c\u5e76\u9700\u8981\u8bbe\u7f6e\u5b57\u7b26\u96c6"),(0,r.kt)("p",null,"\u5982\u679c\u4f7f\u7528 res.send \u65b9\u6cd5\u8fd4\u56de\uff0c\u5219\u4e0d\u9700\u8981\u8bbe\u7f6e\u4efb\u4f55\u5b57\u7b26\u96c6\uff0c\u8fd4\u56de\u6570\u636e\u7684\u683c\u5f0f\u5185\u5bb9\u6709\u5f88\u591a\uff0c\u6700\u7ec8\u4f20\u7ed9\u524d\u7aef\u7684\u90fd\u662f JSON \u5b57\u7b26"),(0,r.kt)("p",null,"\u5982\u679c\u662f\u6a21\u677f\uff0c\u5219\u4f7f\u7528 res.render \u65b9\u6cd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// 1. \u4ecb\u7ecd \u54cd\u5e94\u5bf9\u8c61\nrouter.get(\"/data\", (req, res) => {\n  // 1.1 \u666e\u901a\u5b57\u7b26\n  // res.send('hello world.')\n  // 1.2 \u6570\u7ec4 - JSON\u683c\u5f0f\u7684\u6570\u7ec4\n  // res.send([1, 2, 3, 4]);\n  // 1.3 \u5bf9\u8c61\n  // res.send({\n  //   name: '\u8fea\u4e3d\u70ed\u5df4',\n  //   age: 20,\n  //   gender: false,\n  //   hobby: ['\u5531', '\u8df3', 'rap', '\u7bee\u7403']\n  // })\n  // 1.4 \u8fd4\u56de\u6587\u4ef6\n  // res.sendFile(path.join(__dirname, '../public/index.html'))\n\n  // 1.5 \u6807\u51c6\u7684\u54cd\u5e94\u4f53\n  res.send({\n    msg: \"\u8bf7\u6c42\u6210\u529f\uff01\",\n    code: 200,\n    data: [\n      { id: 1, name: \"\u8fea\u4e3d\u70ed\u5df4\" },\n      { id: 2, name: \"\u53e4\u529b\u5a1c\u624e\" },\n      { id: 3, name: \"\u9a6c\u5c14\u624e\u54c8\" },\n    ],\n    total: 3,\n    error: 0,\n  });\n});\n")),(0,r.kt)("h3",{id:"\u8def\u7531\u6848\u4f8b"},"\u8def\u7531\u6848\u4f8b"),(0,r.kt)("p",null,"\u9700\u6c42\uff1a\u5b8c\u6210\u767b\u5f55\u6210\u529f\u548c\u5931\u8d25\u7684\u4e0d\u540c\u7ed3\u679c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- action\u662f\u63d0\u4ea4\u5730\u5740  method\u662f\u63d0\u4ea4\u65b9\u5f0f  name\u5c5e\u6027\u662f\u5c06\u6765\u89e3\u6784\u7684\u952e --\x3e\n<form action="/login" method="post">\n  <p>\u7528\u6237\u540d\uff1a <input type="text" name="username" /></p>\n  <p>\u5bc6&emsp;\u7801\uff1a <input type="password" name="passwor" /></p>\n  <input type="submit" value="\u63d0\u4ea4" />\n</form>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// 1. \u767b\u5f55\u7684\u9a8c\u8bc1\nrouter.post("/login", (req, res) => {\n  // 1.1 \u83b7\u53d6\u7528\u6237\u767b\u5f55\u7684\u4fe1\u606f\n  // console.log(req.body);\n  const { username, password } = req.body;\n\n  // 1.2 \u9a8c\u8bc1\u7528\u6237\u767b\u5f55\u7684\u4fe1\u606f\u662f\u5426\u4e3a\u6307\u5b9a\u7684\u5185\u5bb9\n  if (username !== "admin") {\n    // 1.3 \u6839\u636e\u9a8c\u8bc1\u7ed3\u679c\u8fd4\u56de\u4e0d\u540c\u7684\u5185\u5bb9\n    res.send({ code: 500, msg: "\u7528\u6237\u540d\u4e0d\u5b58\u5728\uff01" });\n    return;\n  } else if (password !== "abc123") {\n    res.send({ code: 502, msg: "\u5bc6\u7801\u9519\u8bef!" });\n    return;\n  } else {\n    res.send({ code: 200, msg: "\u767b\u5f55\u6210\u529f", token: "asdadassdadasdsadsadsa" });\n  }\n});\n')),(0,r.kt)("h2",{id:"\u540e\u7aef\u6a21\u677f"},"\u540e\u7aef\u6a21\u677f"),(0,r.kt)("p",null,"\u524d\u540e\u7aef\u4e0d\u5206\u79bb\uff08\u73b0\u5b9e\uff09\uff0c\u524d\u540e\u7aef\u5206\u79bb\uff08\u7406\u60f3\u5f0f\uff09"),(0,r.kt)("p",null,"\u56e0\u4e3a\u6ca1\u6709\u5f02\u6b65\u8bf7\u6c42\uff08ajax\uff09\uff0c\u8bf7\u6c42\u53ea\u80fd\u662f\u6807\u7b7e\u5b8c\u6210\uff0c\u524d\u540e\u7aef\u4e0d\u80fd\u5206\u79bb"),(0,r.kt)("p",null,"\u8def\u7531\u4e5f\u9700\u8981\u63d0\u4f9b\u9875\u9762\u6e32\u67d3\u7684\u80fd\u529b\uff0c\u6bd4\u5982\u8bf7\u6c42 / \u6839\u8def\u5f84\uff0c\u8fd4\u56de\u9996\u9875"),(0,r.kt)("h3",{id:"\u4f7f\u7528-ejs-\u6a21\u677f"},"\u4f7f\u7528 ejs \u6a21\u677f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// 1. \u4e0b\u8f7d\u6a21\u5757\n// $ npm i ejs -S\n\n// 2. \u6ce8\u518c\u6a21\u677f\u5f15\u64ce\napp.set("views", path.join(__dirname, "public"));\napp.set("view engine", "ejs");\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"\x3c!--  \u5728 public \u4e2d\u521b\u5efa\u4e86 index.html , \u628a\u540e\u7f00\u540d\u6539\u6210\u4e86 .ejs  --\x3e\n<p>\u4f7f\u7528ejs\u6a21\u677f\u7684\u8bed\u6cd5 --- <%= title %> <%= num %></p>\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// \u5b50\u8def\u7531\u6a21\u5757\nrouter.get("/", function (req, res, next) {\n  // \u6e32\u67d3\u5bf9\u5e94\u7684\u6a21\u677f\u540d\u79f0\uff0c\u4f20\u5165\u6570\u636e\n  res.render("index", { title: "Express", num: 10 });\n});\n')),(0,r.kt)("h3",{id:"\u5176\u4ed6\u8bed\u6cd5"},"\u5176\u4ed6\u8bed\u6cd5"),(0,r.kt)("p",null,"\u6d41\u7a0b\u63a7\u5236\uff08\u5206\u652f\uff0c\u5faa\u73af\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"<h2><%= title %></h2>\n<table>\n  <thead>\n    <tr>\n      <th>\u5e8f\u53f7</th>\n      <th>\u82f1\u96c4\u540d\u79f0</th>\n      <th>\u82f1\u96c4\u89d2\u8272</th>\n      <th>\u6280\u80fd</th>\n      <th>\u662f\u5426\u8d2d\u4e70</th>\n    </tr>\n  </thead>\n  <tbody>\n    <% for(var i = 0; i < data.length; i++) { %>\n    <tr>\n      <td><%= i + 1 %></td>\n      <td><%= data[i].name %></td>\n      <td><%= data[i].role %></td>\n      <td><%= data[i].skill %></td>\n      <td><%= data[i].isBuy ? '\u5df2\u8d2d\u4e70' : '\u672a\u8d2d\u4e70' %></td>\n    </tr>\n    <% } %>\n  </tbody>\n</table>\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'/* GET home page. */\nrouter.get("/", function (req, res, next) {\n  res.render("index", {\n    title: "\u82f1\u96c4\u5217\u8868",\n    code: 1,\n    data: [\n      {\n        id: 3223,\n        name: "\u9c81\u73ed\u4e03\u53f7",\n        role: "\u5c04\u624b",\n        skill: "\u706b\u529b\u538b\u5236",\n        isBuy: true,\n      },\n      {\n        id: 3225,\n        name: "\u59b2\u5df1",\n        role: "\u6cd5\u5e08",\n        skill: "\u5973\u738b\u5d07\u62dc",\n        isBuy: false,\n      },\n      {\n        id: 3257,\n        name: "\u76d6\u4f26",\n        role: "\u6218\u58eb",\n        skill: "\u5fb7\u739b\u897f\u4e9a",\n        isBuy: true,\n      },\n    ],\n  });\n});\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"\x3c!-- <%  %> \u8fd9\u79cd\u8868\u793a\u8bed\u53e5 --\x3e\n\x3c!-- <%= %> \u8fd9\u79cd\u8868\u793a\u7684\u8f93\u51fa --\x3e\n\x3c!-- \u5982\u679c\u5728\u8bed\u53e5\u4e2d\u6ca1\u6709\u540e\u7aef\u4f20\u5165\u7684\u5b57\u6bb5\uff0c\u90a3\u4e48\u4f1a\u62a5\u9519  --\x3e\n<h2><%= title %></h2>\n<% if(code === 1) { %>\n<p>\u5927\u4e54\uff1a\u5b88\u671b\u7740\u5929\u7a7a\uff0c\u5927\u6d77\uff0c\u548c\u4f60\u7684\u56de\u5fc6\u3002</p>\n<% } else if (code === 2) { %>\n<p>\u6241\u9e4a\uff1a\u751f\u5b58\u8fd8\u662f\u6b7b\u4ea1\uff0c\u8fd9\u662f\u4e2a\u95ee\u9898\u3002</p>\n<% } else if (code === 3) { %>\n<p>\u9c81\u73ed\u4e03\u53f7\uff1a\u63cf\u753b\u4f60\u4e0d\u61c2\u7684\u4f4e\u8bed\u3002</p>\n<% } else { %>\n<p>\u9879\u7fbd\uff1a\u547d\u8fd0?\u4e0d\u914d\u505a\u6211\u7684\u5bf9\u624b\u3002</p>\n<% } %>\n")),(0,r.kt)("h3",{id:"\u4f7f\u7528-template-\u6a21\u677f"},"\u4f7f\u7528 template \u6a21\u677f"),(0,r.kt)("p",null,"\u539f\u672c\u53eb\u505a art-template \uff0c\u9ed8\u8ba4\u662f\u5ba2\u6237\u7aef\u4f7f\u7528\u7684\uff0c\u4e5f\u5c31\u662f\u524d\u7aef\u7528\u7684\u591a\uff0c\u540e\u6765\u5728\u670d\u52a1\u5668\u7aef\u4e5f\u652f\u6301\u4f7f\u7528\u4e86\uff0c\u5c31\u662f\u4e00\u4e2a\u62fc\u63a5\u5b57\u7b26\u4e32\u7684\u6a21\u677f\u5de5\u5177\u800c\u5df2\uff1b"),(0,r.kt)("p",null,"\u4f20\u9001\u95e8\uff1a ",(0,r.kt)("a",{parentName:"p",href:"http://aui.github.io/art-template/zh-cn/"},"http://aui.github.io/art-template/zh-cn/")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"$ npm i express-art-template -S")),(0,r.kt)("p",null,"app.js \u4e2d\u58f0\u660e\u6a21\u677f\u7684\u4f7f\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// \u4f7f\u7528\u53e6\u5916\u4e00\u79cd\u6a21\u677f\u7684\u65b9\u5f0f\napp.engine("htm", require("express-art-template"));\napp.set("view engine", "htm");\napp.set("views", path.join(__dirname, "public"));\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// index.jsx \u7684\u5b50\u8def\u7531\u6a21\u677f\nrouter.get("/", (req, res) => {\n  // \u4f7f\u7528 art-template\n  // \u53c2\u65701\uff1a\u6a21\u677f\u6587\u4ef6\u7684\u540d\u79f0\uff0c\u53c2\u65702\uff1a\u4f20\u5165\u7684\u6570\u636e\n  res.render("index", { title: "\u524d\u7aef\u5f00\u53d1" });\n});\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"<h2>\u9996\u9875</h2>\n\x3c!-- \u65e9\u671f\u8bed\u6cd5 \u517c\u5bb9 EJS \u6a21\u677f\u7684\u8bed\u6cd5 --\x3e\n<p><%= title %></p>\n\x3c!-- \u65b0\u7248\u8bed\u6cd5 --\x3e\n<p>{{ title }}</p>\n")),(0,r.kt)("h3",{id:"\u5176\u4ed6\u8bed\u6cd5-1"},"\u5176\u4ed6\u8bed\u6cd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"\x3c!-- \u5206\u652f\u5199\u6cd5 --\x3e\n{{ if code === 1 }}\n<p>\u5927\u4e54\uff1a\u5b88\u671b\u7740\u5929\u7a7a\uff0c\u5927\u6d77\uff0c\u548c\u4f60\u7684\u56de\u5fc6\u3002</p>\n{{ else if code === 2 }}\n<p>\u9c81\u73ed\u4e03\u53f7\uff1a\u63cf\u753b\u4f60\u4e0d\u61c2\u7684\u4f4e\u8bed\u3002</p>\n{{ /if }}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"<tbody>\n  \x3c!-- \u7d22\u5f15 $index  \u503c $value --\x3e\n  {{ each data }}\n  <tr>\n    <td>{{ $index + 1 }}</td>\n    <td>{{ $value.name }}</td>\n    <td>{{ $value.role }}</td>\n    <td>{{ $value.skill }}</td>\n    <td>{{ $value.isBuy ? '\u5df2\u8d2d\u4e70' : '\u672a\u8d2d\u4e70' }}</td>\n  </tr>\n  {{ /each }}\n</tbody>\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"\x3c!-- \u7b80\u5316 val \u4ee3\u66ff\u7684\u662f $value  i \u4ee3\u66ff\u7684\u5c31\u662f $index  \u540d\u79f0\u968f\u4fbf\u53d6 --\x3e\n{{ each data val i }}\n<tr>\n  <td>{{ i + 1 }}</td>\n  <td>{{ val.name }}</td>\n  <td>{{ val.role }}</td>\n  <td>{{ val.skill }}</td>\n  <td>{{ val.isBuy ? '\u5df2\u8d2d\u4e70' : '\u672a\u8d2d\u4e70' }}</td>\n</tr>\n{{ /each }}\n")),(0,r.kt)("h2",{id:"\u6848\u4f8b"},"\u6848\u4f8b"),(0,r.kt)("h3",{id:"\u57fa\u672c\u5e03\u5c40"},"\u57fa\u672c\u5e03\u5c40"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<div class="container">\n  <h2>\u82f1\u96c4\u5217\u8868\u5c55\u793a</h2>\n  \x3c!-- \u5217\u8868\u5c55\u793a\u82f1\u96c4 --\x3e\n  <ul>\n    <li>\n      <img src="./imgs/112.jpg" alt="" />\n      <p>\n        <span>\u9c81\u73ed\u4e03\u53f7</span>\n        <br />\n        <em>\u5c04\u624b</em>\n      </p>\n    </li>\n  </ul>\n</div>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-css"},".container {\n  margin: 30px;\n  width: 74%;\n  box-sizing: border-box;\n}\n.container ul {\n  padding: 20px 0;\n  display: flex;\n  flex-wrap: wrap;\n  align-content: center;\n}\n.container ul li {\n  margin: 15px 0;\n  margin-right: 25px;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.18);\n  padding: 10px;\n  border-radius: 10px;\n}\n.container ul li img {\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  border: 3px solid #ccc;\n}\n.container ul li p {\n  color: #333;\n  font-size: 14px;\n  line-height: 26px;\n  text-align: center;\n}\n.container ul li p em {\n  color: #666;\n}\n")),(0,r.kt)("h3",{id:"\u52a8\u6001\u6e32\u67d3"},"\u52a8\u6001\u6e32\u67d3"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'/* \u89e3\u6790\u9996\u9875. */\nrouter.get("/", function (req, res, next) {\n  // \u5c06\u6765\u8def\u7531\u7684\u529f\u80fd\u5c31\u662f\u628a\u6570\u636e\u5e93\u7684\u8d44\u6e90\u8fd4\u56de\u7ed9\u67d0\u4e2a\u6307\u5b9a\u7684\u9875\u9762\n  res.render("index", require("./Heros.json"));\n});\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- \u5217\u8868\u5c55\u793a\u82f1\u96c4 --\x3e\n<ul>\n  {{ each heros item }}\n  <li>\n    <img src="./imgs/{{ item.imgSrc }}" alt="" />\n    <p>\n      <span>{{ item.name }}</span>\n      <br />\n      <em>{{ item.type }}</em>\n    </p>\n  </li>\n  {{ /each }}\n</ul>\n')),(0,r.kt)("h3",{id:"\u8df3\u8f6c\u5230\u8be6\u60c5\u9875"},"\u8df3\u8f6c\u5230\u8be6\u60c5\u9875"),(0,r.kt)("p",null,"\u901a\u8fc7 a \u6807\u7b7e\u7684\u8df3\u8f6c\uff0c\u8bf7\u6c42\u5bf9\u5e94\u7684\u8def\u7531\uff0c\u5c55\u793a\u5bf9\u5e94\u7684\u6a21\u677f\u6587\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- \u5217\u8868\u5c55\u793a\u82f1\u96c4 --\x3e\n<ul>\n  {{ each heros item }}\n  <li>\n    <a href="/detail">\n      <img src="./imgs/{{ item.imgSrc }}" alt="" />\n      <p>\n        <span>{{ item.name }}</span>\n        <br />\n        <em>{{ item.type }}</em>\n      </p>\n    </a>\n  </li>\n  {{ /each }}\n</ul>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// \u5c55\u793a\u8be6\u60c5\u9875\u7684\u8def\u7531\nrouter.get("/detail", (req, res) => {\n  // \u6e32\u67d3\u5bf9\u5e94\u7684\u6a21\u677f\n  res.render("detail", {});\n});\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<div class="container">\n  <h2>\u8be6\u60c5\u9875\u7684\u5c55\u793a</h2>\n  \x3c!-- \u5c55\u793a\u82f1\u96c4\u8be6\u60c5 --\x3e\n  <div class="show-hero">\n    <p>\n      <img src="./imgs/112.jpg" alt="" />\n    </p>\n    <p><span>\u82f1\u96c4\u540d\u79f0\uff1a</span> \u9c81\u73ed\u4e03\u53f7</p>\n    <p><span>\u82f1\u96c4\u89d2\u8272\uff1a</span> \u5c04\u624b</p>\n    <p><span>\u82f1\u96c4\u4ecb\u7ecd\uff1a</span> \u6c34\u7535\u8d39\u6c34\u7535\u8d39\u6c34\u7535\u8d39\u6c34\u7535\u8d39</p>\n  </div>\n</div>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-css"},".show-hero {\n  width: 350px;\n  padding: 20px;\n  background-color: rgba(156, 81, 231, 0.16);\n  margin-top: 40px;\n  border-radius: 10px;\n}\n\n.show-hero img {\n  width: 120px;\n  height: 120px;\n  border-radius: 50%;\n  border: 6px solid rgb(29, 126, 223);\n  margin-bottom: 10px;\n}\n\n.show-hero p {\n  margin-bottom: 15px;\n  color: #333;\n}\n\n.show-hero p span {\n  font-weight: 700;\n}\n")),(0,r.kt)("h3",{id:"\u52a8\u6001\u5c55\u793a\u8be6\u60c5"},"\u52a8\u6001\u5c55\u793a\u8be6\u60c5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- <a href="/detail?id={{ item.id }}"> --\x3e\n<a href="/detail/{{ item.id }}">\n  <img src="./imgs/{{ item.imgSrc }}" alt="" />\n  <p>\n    <span>{{ item.name }}</span>\n    <br />\n    <em>{{ item.type }}</em>\n  </p>\n</a>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'// \u83b7\u53d6\u82f1\u96c4\u5217\u8868\u6570\u636e\nconst data = require("./Heros.json");\n\n// \u5c55\u793a\u8be6\u60c5\u9875\u7684\u8def\u7531\n// router.get(\'/detail\', (req, res) => {\nrouter.get("/detail/:id", (req, res) => {\n  // \u901a\u8fc7 req.query \u63a5\u6536\u67e5\u8be2\u53c2\u6570\n  // \u901a\u8fc7 req.params \u63a5\u6536\u8def\u5f84\u4fe1\u606f\n\n  // \u901a\u8fc7id\u53ef\u4ee5\u83b7\u53d6\u5bf9\u5e94\u7684\u82f1\u96c4\n  const { id } = req.params;\n  const item = data.heros.find((item) => item.id === +id);\n  // console.log(item);\n\n  // \u627e\u5230\u5bf9\u5e94id\u7684\u90a3\u6761\u6570\u636e\uff0c\u90a3\u4e2a\u82f1\u96c4\u4eba\u7269\u8fd4\u56de\u5230\u9875\u9762\u89e3\u6790\n  res.render("detail", item);\n});\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- \u5c55\u793a\u82f1\u96c4\u8be6\u60c5 --\x3e\n<div class="show-hero">\n  <p>\n    <img src="/imgs/{{ imgSrc }}" alt="" />\n  </p>\n  <p><span>\u82f1\u96c4\u540d\u79f0\uff1a</span> {{ name }}</p>\n  <p><span>\u82f1\u96c4\u89d2\u8272\uff1a</span> {{ type }}</p>\n  <p><span>\u82f1\u96c4\u4ecb\u7ecd\uff1a</span> {{ desc }}</p>\n</div>\n')),(0,r.kt)("p",null,"\u53c2\u8003\u8bed\u96c0\u6587\u6863\uff1a ",(0,r.kt)("a",{parentName:"p",href:"https://www.yuque.com/docs/share/6059a94a-4114-4657-9a1b-f3706b59aff2?#"},"https://www.yuque.com/docs/share/6059a94a-4114-4657-9a1b-f3706b59aff2?#")," \u300aExpress \u6846\u67b6\u300b"),(0,r.kt)("p",null,"----- end"))}u.isMDXComponent=!0},9513:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/middleware-4cdf492b75557fddca0073fb9dba90d6.png"},8693:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/\u4e2d\u95f4\u4ef6\u6d41\u7a0b-9a20067a89e4ba45270dc1c0955e17c0.png"}}]);