"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5433],{3905:(n,e,t)=>{t.d(e,{Zo:()=>p,kt:()=>h});var a=t(7294);function o(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function r(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,a)}return t}function s(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?r(Object(t),!0).forEach((function(e){o(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function l(n,e){if(null==n)return{};var t,a,o=function(n,e){if(null==n)return{};var t,a,o={},r=Object.keys(n);for(a=0;a<r.length;a++)t=r[a],e.indexOf(t)>=0||(o[t]=n[t]);return o}(n,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(a=0;a<r.length;a++)t=r[a],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}var c=a.createContext({}),i=function(n){var e=a.useContext(c),t=e;return n&&(t="function"==typeof n?n(e):s(s({},e),n)),t},p=function(n){var e=i(n.components);return a.createElement(c.Provider,{value:e},n.children)},d={inlineCode:"code",wrapper:function(n){var e=n.children;return a.createElement(a.Fragment,{},e)}},u=a.forwardRef((function(n,e){var t=n.components,o=n.mdxType,r=n.originalType,c=n.parentName,p=l(n,["components","mdxType","originalType","parentName"]),u=i(t),h=o,m=u["".concat(c,".").concat(h)]||u[h]||d[h]||r;return t?a.createElement(m,s(s({ref:e},p),{},{components:t})):a.createElement(m,s({ref:e},p))}));function h(n,e){var t=arguments,o=e&&e.mdxType;if("string"==typeof n||o){var r=t.length,s=new Array(r);s[0]=u;var l={};for(var c in e)hasOwnProperty.call(e,c)&&(l[c]=e[c]);l.originalType=n,l.mdxType="string"==typeof n?n:o,s[1]=l;for(var i=2;i<r;i++)s[i]=t[i];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},8130:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>i});var a=t(7462),o=(t(7294),t(3905));const r={sidebar_position:8},s="fetch \u548c axios",l={unversionedId:"Node/fetch\u548caxios",id:"Node/fetch\u548caxios",title:"fetch \u548c axios",description:"fetch",source:"@site/docs/8.Node/8.fetch\u548caxios.md",sourceDirName:"8.Node",slug:"/Node/fetch\u548caxios",permalink:"/demo/docs/Node/fetch\u548caxios",draft:!1,editUrl:"https://github.com/Vipers3/demo/docs/8.Node/8.fetch\u548caxios.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"token \u548c\u672c\u5730\u5b58\u50a8",permalink:"/demo/docs/Node/\u8865\u5145\u548c\u6269\u5c55"},next:{title:"React",permalink:"/demo/docs/category/react"}},c={},i=[{value:"fetch",id:"fetch",level:2},{value:"axios",id:"axios",level:2},{value:"\u4e0b\u8f7d\u548c\u4f7f\u7528",id:"\u4e0b\u8f7d\u548c\u4f7f\u7528",level:3},{value:"axios \u8bf7\u6c42\u7684\u65b9\u5f0f",id:"axios-\u8bf7\u6c42\u7684\u65b9\u5f0f",level:3},{value:"axios \u914d\u7f6e",id:"axios-\u914d\u7f6e",level:3},{value:"\u5168\u5c40\u914d\u7f6e",id:"\u5168\u5c40\u914d\u7f6e",level:4},{value:"\u5b9e\u4f8b\u914d\u7f6e",id:"\u5b9e\u4f8b\u914d\u7f6e",level:4},{value:"\u62e6\u622a\u5668",id:"\u62e6\u622a\u5668",level:4},{value:"\u53d6\u6d88\u8bf7\u6c42",id:"\u53d6\u6d88\u8bf7\u6c42",level:4},{value:"\u8bf7\u6c42\u53c2\u6570",id:"\u8bf7\u6c42\u53c2\u6570",level:4},{value:"axios \u7684\u5c01\u88c5",id:"axios-\u7684\u5c01\u88c5",level:3}],p={toc:i};function d(n){let{components:e,...t}=n;return(0,o.kt)("wrapper",(0,a.Z)({},p,t,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"fetch-\u548c-axios"},"fetch \u548c axios"),(0,o.kt)("h2",{id:"fetch"},"fetch"),(0,o.kt)("p",null,"\u200bfetch \u65b9\u6cd5\u662f es6 \u539f\u751f\u7684\u65b9\u5f0f\uff0c\u8d70\u7684\u4e0d\u662f XMLHttpRequest \u65b9\u5f0f"),(0,o.kt)("p",null,"\u200bfetch \u652f\u6301 Promise \u7684\u5199\u6cd5\uff0c\u8fd4\u56de Promsie \u7684\u5b9e\u4f8b\uff0c\u53ef\u4ee5\u901a\u8fc7 then \u65b9\u6cd5\u8fd4\u56de\u54cd\u5e94\u5185\u5bb9\uff0c\u4f46\u662f\u7b2c\u4e00\u4e2a then \u65b9\u6cd5\u9700\u8981\u8fd4\u56de\u683c\u5f0f\u54cd\u5e94\u683c\u5f0f"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"a. \u539f\u751f\u7684\u81ea\u5e26\u7684\u8bf7\u6c42\u65b9\u5f0f\uff0c\u4e0d\u9700\u8981\u5f15\u5165\u4efb\u4f55\u5176\u4ed6\u7684\u7b2c\u4e09\u65b9\u63d2\u4ef6\nb. fetch \u65b9\u6cd5\u4f1a\u8fd4\u56de\u4e00\u4e2aPromise\u7684\u5b9e\u4f8b\uff0c\u53ef\u4ee5\u8c03\u7528 then \u65b9\u6cd5\nc. fetch \u7684\u7b2c\u4e00\u4e2athen\u65b9\u6cd5\u83b7\u53d6\u5230\u7684\u54cd\u5e94\u5bf9\u8c61\u5fc5\u987b\u8981\u8c03\u7528\u4e00\u4e2a\u683c\u5f0f\u65b9\u6cd5\u8fd4\u56de\nd. \u5728\u7b2c\u4e8c\u4e2athen\u65b9\u6cd5\u4e2d\u53ef\u4ee5\u83b7\u53d6\u5230\u771f\u5b9e\u7684\u6570\u636e\n\n\u6ce8\u610f\u4e8b\u9879\uff1a\na. \u5982\u679c\u670d\u52a1\u5668\u7aef\u8fd4\u56de\u7684\u72b6\u6001\u7801\u5373\u4f7f\u662f404\u6216\u8005500\uff0cfetch\u4e5f\u4e0d\u4f1a\u62a5\u9519\nb. \u53ea\u6709\u5f53\u7f51\u7edc\u6545\u969c\u8bf7\u6c42\u88ab\u963b\u6b62\u65f6\u624d\u4f1a\u88ab\u6807\u8bb0\u4e3areject\uff0c\u88abcatch\u6355\u83b7\nc. \u9ed8\u8ba4\u4e0d\u4f1a\u81ea\u52a8\u643a\u5e26Cookie, \u9700\u8981\u624b\u52a8\u643a\u5e26\nd. \u5982\u679c\u76f4\u63a5\u4f7f\u7528\uff0c\u7b2c\u4e00\u4e2athen\u9ed8\u8ba4\u5904\u7406\u4e0d\u4e86\u4e1a\u52a1\uff0c\u8fd8\u9700\u8981\u989d\u5916\u7684\u5c01\u88c5\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'fetch("http://localhost:5100/books")\n  .then((data) => {\n    // \u7b2c\u4e00\u4e2athen\u65b9\u6cd5\u9700\u8981\u8fd4\u56de\u54cd\u5e94\u4f53\u7684\u683c\u5f0f\n    return data.json();\n  })\n  .then((res) => {\n    console.log(res);\n  });\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'// \u5e26\u914d\u7f6e\u7684\u8bf7\u6c42\u65b9\u5f0f\nfetch("http://127.0.0.1:5100/books", {\n  method: "post",\n  headers: {\n    "content-type": "application/json",\n  },\n  body: JSON.stringify({\n    name: "\u897f\u6e38\u8bb0",\n    price: 118.7,\n  }),\n})\n  .then((data) => {\n    return data.json();\n  })\n  .then((data) => {\n    console.log(data);\n  });\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'// GET \u548c DELETE \u4e0d\u9700\u8981\u8bbe\u7f6e body \u6216\u8005 header \u7684\nfetch("http://127.0.0.1:5100/books", {\n  method: "get",\n})\n  .then((data) => {\n    // \u5982\u679c\u6307\u5b9a\u7684\u662f\u7eaf\u6587\u672c\n    return data.text();\n  })\n  .then((data) => {\n    console.log(data);\n  });\n')),(0,o.kt)("h2",{id:"axios"},"axios"),(0,o.kt)("p",null,"\u200b \u672c\u6765\u662f\u4e2a\u5c0f\u5de5\u5177\uff0c\u540e\u6765\u5728\u5176\u4ed6\u6846\u67b6\u7684\u5408\u5e76\u4e0b\u9010\u6e10\u6d41\u884c\uff0c\u5f88\u706b\u70ed"),(0,o.kt)("p",null,"\u200b \u662f\u4e00\u4e2a\u4e13\u95e8\u7684 http \u5e93 / \u7f51\u7edc\u8bf7\u6c42\u5e93\uff0c \u524d\u540e\u7aef\u90fd\u53ef\u4ee5\u4f7f\u7528"),(0,o.kt)("p",null,"\u200b \u54cd\u5e94\u4f53\u5728\u8fd4\u56de\u7684\u5bf9\u8c61 data \u4e2d\uff0c\u4e0d\u662f\u76f4\u63a5\u7ed9\u7684"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"1. \u57fa\u4e8ePromise\u5c01\u88c5\n2. \u4f53\u79ef\u66f4\u5c0f\uff0c\u538b\u7f29\u540e\u4e0d\u523030k\uff0c\u6bd4\u8f83\u8f7b\u91cf\n3. \u524d\u7aef\u548c\u540e\u7aef\uff08Node.js\uff09\u90fd\u53ef\u4ee5\u4f7f\u7528\n4. \u6709\u4e30\u5bcc\u7684\u914d\u7f6e\u9879(\u8d85\u65f6\uff0c\u8bf7\u6c42\u5934\uff0c\u62e6\u622a\u5668...)\n5. \u66f4\u52a0\u5b89\u5168\u7684\u914d\u7f6e\uff0c\u6bd4\u4f20\u7edf\u7684\u65b9\u5f0f\u80fd\u529b\u66f4\u5f3a\n")),(0,o.kt)("p",null,"\u200b \u672c\u6765\u662f\u4e2a\u5c0f\u5de5\u5177\uff0c\u540e\u6765\u5728\u5176\u4ed6\u6846\u67b6\u7684\u5408\u5e76\u4e0b\u9010\u6e10\u6d41\u884c\uff0c\u5f88\u706b\u70ed"),(0,o.kt)("p",null,"\u200b \u662f\u4e00\u4e2a\u4e13\u95e8\u7684 http \u5e93 / \u7f51\u7edc\u8bf7\u6c42\u5e93\uff0c \u524d\u540e\u7aef\u90fd\u53ef\u4ee5\u4f7f\u7528"),(0,o.kt)("p",null,"\u200b \u54cd\u5e94\u4f53\u5728\u8fd4\u56de\u7684\u5bf9\u8c61 data \u4e2d\uff0c\u4e0d\u662f\u76f4\u63a5\u7ed9\u7684"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"1. \u57fa\u4e8ePromise\u5c01\u88c5\n2. \u4f53\u79ef\u66f4\u5c0f\uff0c\u538b\u7f29\u540e\u4e0d\u523030k\uff0c\u6bd4\u8f83\u8f7b\u91cf\n3. \u524d\u7aef\u548c\u540e\u7aef\uff08Node.js\uff09\u90fd\u53ef\u4ee5\u4f7f\u7528\n4. \u6709\u4e30\u5bcc\u7684\u914d\u7f6e\u9879(\u8d85\u65f6\uff0c\u8bf7\u6c42\u5934\uff0c\u62e6\u622a\u5668...)\n5. \u66f4\u52a0\u5b89\u5168\u7684\u914d\u7f6e\uff0c\u6bd4\u4f20\u7edf\u7684\u65b9\u5f0f\u80fd\u529b\u66f4\u5f3a\n")),(0,o.kt)("h3",{id:"\u4e0b\u8f7d\u548c\u4f7f\u7528"},"\u4e0b\u8f7d\u548c\u4f7f\u7528"),(0,o.kt)("p",null,"\u200b \u65b9\u5f0f 1"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"// \u8f93\u5165\u7f51\u5740\u4e0b\u8f7d\u4e4b\u540e\uff0c\u4fdd\u5b58\u5230\u672c\u5730\u7684text\u6587\u6863\uff0c\u518d\u4fee\u6539\u4e3ajs\u5c31\u53ef\u4ee5\u7528\nhttps://cdn.jsdelivr.net/npm/axios/dist/axios.min.js\n")),(0,o.kt)("p",null,"\u200b \u65b9\u5f0f 2"),(0,o.kt)("p",null,"\u200b \u4f7f\u7528 npm \u7684\u65b9\u5f0f\u4e0b\u8f7d ",(0,o.kt)("inlineCode",{parentName:"p"},"$ npm i axios -S")),(0,o.kt)("p",null,"\u200b \u5728\u4e0b\u8f7d\u7684 node_modules \u6587\u4ef6\u5939\u4e2d\uff0c\u627e\u5230 dist \u76ee\u5f55\uff0c\u76f4\u63a5\u5f15\u5165\u5373\u53ef"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'// 1. \u4f7f\u7528axios\nconst res = axios("http://localhost:5100/books");\n\n// 1.2 \u4e0d\u9700\u8981\u4f7f\u7528\u989d\u5916\u7684then\u65b9\u6cd5\u5904\u7406\u54cd\u5e94\u4f53\nres.then((data) => {\n  console.log(data);\n});\n')),(0,o.kt)("h3",{id:"axios-\u8bf7\u6c42\u7684\u65b9\u5f0f"},"axios \u8bf7\u6c42\u7684\u65b9\u5f0f"),(0,o.kt)("p",null,"\u200b get \u8bf7\u6c42\u7684\u65b9\u5f0f"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'// \u65b9\u5f0f1\naxios("http://localhost:5100/stars").then((res) => {\n  // \u8fd4\u56de\u7684\u54cd\u5e94\u4f53\u5728\u5bf9\u8c61\u7684data\u4e2d\n  console.log(res.data);\n})(\n  // \u65b9\u5f0f2\n  async () => {\n    const { data } = await axios("http://localhost:5100/stars");\n    console.log(data);\n  }\n)()(async () => {\n  const { data } = await axios.get("http://localhost:5100/stars");\n  console.log(data, 1);\n})();\n')),(0,o.kt)("p",null,"\u200b post \u8bf7\u6c42\u7684\u65b9\u5f0f"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'// \u65b9\u5f0f1\naxios({\n  method: "POST",\n  url: "http://localhost:3000/demo",\n  // \u8bf7\u6c42\u4f53\u7684\u5b57\u6bb5\n  data: {\n    name: "\u9093\u80e1\u5f20\u5e05",\n    age: 20,\n  },\n}).then((res) => {\n  console.log(res);\n});\n\n// \u65b9\u5f0f2\n(async () => {\n  const { data } = await axios.post("http://localhost:3000/demo", {\n    name: "\u9093\u80e1\u5f20\u5e05",\n    age: 20,\n  });\n  console.log(data);\n})();\n')),(0,o.kt)("h3",{id:"axios-\u914d\u7f6e"},"axios \u914d\u7f6e"),(0,o.kt)("p",null,"\u200b \u5728\u53d1\u9001\u8bf7\u6c42\u7684\u65f6\u5019\uff0caxios \u53ef\u4ee5\u63d0\u4f9b\u5f88\u591a\u7684\u914d\u7f6e\u9879"),(0,o.kt)("h4",{id:"\u5168\u5c40\u914d\u7f6e"},"\u5168\u5c40\u914d\u7f6e"),(0,o.kt)("p",null,"\u200b \u5728\u4e00\u4e2a\u9879\u76ee\u4e2d\uff0c\u5982\u679c\u6240\u6709\u7684\u8bf7\u6c42\u914d\u7f6e\u90fd\u662f\u5dee\u4e0d\u591a\u7684\uff0c\u90a3\u4e48\u53ef\u4ee5\u96c6\u4e2d\u58f0\u660e"),(0,o.kt)("p",null,"\u200b \u8bf7\u6c42\u5730\u5740\uff0c\u8bf7\u6c42\u8d85\u65f6\u7684\u914d\u7f6e\uff0c\u8bf7\u6c42\u5934\u7684\u914d\u7f6e"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'// 1. \u5168\u5c40\u914d\u7f6e\n// defaults \u9ed8\u8ba4\u7684\u914d\u7f6e\u5bf9\u8c61\n// baseURL  \u8bf7\u6c42\u7684\u57fa\u672c\u8def\u5f84\n// \u610f\u4e49\uff1a\u53d1\u8bf7\u6c42\u53ea\u9700\u8981\u540e\u9762\u7684\u4e00\u622a\u8def\u5f84\u5c31\u53ef\u4ee5\naxios.defaults.baseURL = "http://localhost:3000";\n// \u8bbe\u7f6e\u8bf7\u6c42\u8d85\u65f6 - \u8d85\u65f6\u4f1a\u81ea\u52a8\u65ad\u5f00\naxios.defaults.timeout = 5 * 1000;\n// \u8bbe\u7f6e\u8bf7\u6c42\u5934 - header s  \u6570\u636e\u53ea\u80fd\u662f\u82f1\u6587 - \u53ef\u4ee5\u914d\u7f6e\u591a\u9879\naxios.defaults.headers.common["chenwei"] = "abcdefg";\n// axios.defaults.headers.common[\'Authorazition\'] = \'Brken adsadasdasdasdasda\'\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'(async function () {\n  const { data: res1 } = await axios("/data");\n  console.log(res1);\n})();\n')),(0,o.kt)("blockquote",null,(0,o.kt)("h5",{parentName:"blockquote",id:"\u5982\u679c\u5728\u4e00\u4e2a\u9879\u76ee\u4e2d\u540e\u7aef\u63a5\u53e3\u7684\u4f4d\u7f6e\u4e00\u81f4\u90a3\u4e48\u5168\u5c40\u6ca1\u6bdb\u75c5\u4f46\u662f\u63a5\u53e3\u5f88\u591a\u5728\u5168\u5c40\u8bbe\u7f6e\u7684\u914d\u7f6e\u5c31\u4e0d\u592a\u5b9e\u7528"},"\u5982\u679c\u5728\u4e00\u4e2a\u9879\u76ee\u4e2d\u540e\u7aef\u63a5\u53e3\u7684\u4f4d\u7f6e\u4e00\u81f4\uff0c\u90a3\u4e48\u5168\u5c40\u6ca1\u6bdb\u75c5\uff0c\u4f46\u662f\u63a5\u53e3\u5f88\u591a\u5728\u5168\u5c40\u8bbe\u7f6e\u7684\u914d\u7f6e\u5c31\u4e0d\u592a\u5b9e\u7528")),(0,o.kt)("h4",{id:"\u5b9e\u4f8b\u914d\u7f6e"},"\u5b9e\u4f8b\u914d\u7f6e"),(0,o.kt)("p",null,"\u200b axios \u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u5f0f\uff0c\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u5355\u72ec\u7684\u5b9e\u4f8b"),(0,o.kt)("p",null,"\u200b \u4ece\u800c\u4e0d\u4f1a\u5f71\u54cd\u5176\u4ed6 axios \u8bf7\u6c42\u7684\u53d1\u9001\uff0c\u5185\u90e8\u8bf7\u6c42\u4f7f\u7528\u7684\u662f\u5b9e\u4f8b"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'// 1. \u5b9e\u4f8b\u914d\u7f6e\n// create \u65b9\u6cd5\u4f1a\u4ea7\u751f\u4e00\u4e2aaxios\u7684\u5b9e\u4f8b\uff0c\u4e0d\u4f1a\u6c61\u67d3\u5168\u5c40\u7684\u914d\u7f6e\nconst kris = axios.create({\n  // \u914d\u7f6e\u5b9e\u4f8b\u79c1\u6709\u7684\u5c5e\u6027\n  // \u5730\u5740\n  baseURL: "http://192.168.14.62:3000",\n  // \u8bbe\u7f6e\u8d85\u65f6\u54cd\u5e94\n  timeout: 1 * 1000,\n  // \u643a\u5e26\u8bf7\u6c42\u5934\n  headers: {\n    demo: "xyz",\n    Authorazition: "asdasdaasdasd",\n  },\n});\n// 2. \u4ee5\u5b9e\u4f8b\u7684\u65b9\u5f0f\u53d1\u8bf7\u6c42\nkris.get("/").then((res) => {\n  console.log(res.data);\n});\nkris.get("/data").then((res) => {\n  console.log(res.data);\n});\n// 3. \u4ee5\u4e0a\u7684\u4e1c\u897f\uff0c\u8ddfaxios\u7684\u5b9e\u4f8b\u6ca1\u6709\u5173\u7cfb\naxios.get("http://127.0.0.1:5100/books").then((res) => {\n  console.log(res.data);\n});\n')),(0,o.kt)("h4",{id:"\u62e6\u622a\u5668"},"\u62e6\u622a\u5668"),(0,o.kt)("p",null,"\u200b \u7c7b\u4f3c\u4e8e\u4e2d\u95f4\u4ef6\uff0c\u5904\u7406\u7684\u90fd\u662f\u5173\u4e8e\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u64cd\u4f5c\uff0c\u670d\u52a1\u5668\u7aef\u5904\u7406"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"app.use(function (req, res, next) {\n  // req \u8bf7\u6c42\u62a5\u6587\u7684\u5bf9\u8c61\n  // res \u54cd\u5e94\u62a5\u6587\u751f\u6210\u7684\u5bf9\u8c61\n\n  // \u653e\u884c\u5e76\u643a\u5e26\u6570\u636e\n  next();\n});\n")),(0,o.kt)("p",null,"\u200b axios \u7684\u62e6\u622a\u5668\uff0c\u4e5f\u662f\u9488\u5bf9\u4e8e\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u64cd\u4f5c\uff0c\u5ba2\u6237\u7aef\u5904\u7406"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'// 1. \u62e6\u622a\u5668\n// interceptor   \u8bf7\u6c42\u548c\u54cd\u5e94  => interceptors\n// 1.1 \u8bf7\u6c42\u62e6\u622a\n// \u53c2\u6570\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u4f7f\u7528use\u65b9\u6cd5\u6302\u8f7d/\u6ce8\u518c\naxios.interceptors.request.use((config) => {\n  // \u8fd9\u91cc\u6240\u6709\u5173\u4e8e\u8bf7\u6c42\u7684\u4e8b\u60c5\uff0c\u90fd\u662f\u901a\u8fc7 config \u53c2\u6570\u5b8c\u6210\n  // \u4e5f\u53ef\u4ee5\u5b8c\u6210\u4e00\u4e9b\u57fa\u7840\u7684\u914d\u7f6e\n  // \u8d85\u65f6\u7684\uff0c\u57fa\u7840\u8def\u5f84\u7684\uff0c\u8bf7\u6c42\u5934\u7684\n  config.baseURL = "http://127.0.0.1:3000";\n  // config.timeout = 1 * 1000\n  config.headers = { demo: "asdasdasd" };\n\n  // \u989d\u5916\u7684\u4e24\u4e2a\u573a\u666f\n  // \u5f00\u59cb\u53d1\u8bf7\u6c42\u7684\u65f6\u5019\u5b8c\u6210 NProgress \u7684\u8fdb\u5ea6\u6761\u5c55\u793a\n  // \u767b\u5f55\u8bf7\u6c42\u4e0d\u9700\u8981token\uff0c\u4f46\u662f\u5982\u679c\u6709token\u5c31\u9700\u8981\u5728\u8bf7\u6c42\u5934\u643a\u5e26\n\n  // \u2606\u2606\u2606\u2606\u2606 \u4e00\u5b9a\u8981return\u51fa\u53bb\uff0c\u4e0d\u7136\u4f1a\u8bf7\u6c42\u4e0d\u4e86\n  return config;\n});\n\n// 1.2 \u54cd\u5e94\u62e6\u622a\naxios.interceptors.response.use((res) => {\n  // \u54cd\u5e94\u6210\u529f\u4e4b\u540e\uff0c\u8fdb\u5ea6\u6761\u5c31\u53ef\u4ee5\u5173\u95ed\u4e86\n  // \u6b63\u5e38axios\u8bf7\u6c42\u56de\u6765\u7684\u6570\u636e\uff0c\u90fd\u88ab\u5305\u88f9\u5728\u4e86\u5bf9\u8c61\u7684data\u4e2d\n  // \u2606\u2606\u2606\u2606\u2606  \u540c\u6837\uff0c\u4e00\u5b9a\u8981return\u51fa\u53bb\n  // return res\n  return res.data;\n});\n// 2. \u53d1\u9001\u8bf7\u6c42\naxios.get("/data").then((res) => {\n  // \u5982\u679c\u54cd\u5e94\u62e6\u622a\u628a\u6570\u636e\u8fd4\u56de\u4e86\uff0c\u90a3\u4e48\u4e0d\u9700\u8981\u518d .data \u4e86\n  console.log(res);\n});\n')),(0,o.kt)("h4",{id:"\u53d6\u6d88\u8bf7\u6c42"},"\u53d6\u6d88\u8bf7\u6c42"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'// \u65b9\u5f0f1\n// signal \u4fe1\u53f7\uff0c\u793a\u610f\n// controller.abort()  \u53d6\u6d88\nconst Controller = new AbortController();\n// signal \u4fe1\u53f7\uff0c\u793a\u610f\nbtn1.onclick = function () {\n  axios\n    .get("http://localhost:3000/data", {\n      // \u7531\u63a7\u5236\u5668\u63d0\u4f9b\u4e00\u4e2a\u4fe1\u53f7\n      signal: Controller.signal,\n    })\n    .then((res) => {\n      console.log(res.data);\n    });\n};\nbtn2.onclick = function () {\n  // \u63a7\u5236\u5668\uff0c\u8c03\u7528\u53d6\u6d88\u7684\u65b9\u6cd5\n  Controller.abort();\n};\n\n// \u65b9\u5f0f2\n// cancelToken: \u6d3e\u53d1token\n// source.cancel()   \u53d6\u6d88\nconst CancelToken = axios.CancelToken;\n// \u83b7\u53d6\u751f\u6210token\u7684\u8d44\u6e90\nconst source = CancelToken.source();\nbtn1.onclick = function () {\n  axios\n    .get("http://localhost:3000/data", {\n      // cancelToken \u751f\u6210\u7684\u968f\u673a\u5b57\u6bb5\n      cancelToken: source.token,\n    })\n    .then((res) => {\n      console.log(res.data);\n    });\n};\nbtn2.onclick = function () {\n  // source.cancel()\n  // \u81ea\u5b9a\u4e49\u63d0\u793a\u7684\u5185\u5bb9.\n  source.cancel("some msg....");\n};\n')),(0,o.kt)("h4",{id:"\u8bf7\u6c42\u53c2\u6570"},"\u8bf7\u6c42\u53c2\u6570"),(0,o.kt)("p",null,"\u200b \u8bf7\u6c42\u53c2\u6570\u643a\u5e26\uff0c\u4e3b\u8981\u5206\u4e3a get \u8bf7\u6c42\u548c post \u8bf7\u6c42\uff0cput \u8bf7\u6c42\u548c delete \u8bf7\u6c42\u540c\u4e0a"),(0,o.kt)("p",null,"\u200b get \u8bf7\u6c42\u643a\u5e26\u53c2\u6570\uff0c\u6ca1\u6709\u8bf7\u6c42\u4f53"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"// 1. axios \u7684\u8bf7\u6c42\u53c2\u6570\n// axios.get('http://127.0.0.1:3000?id=100&num=1')\n// \u65b9\u5f0f2\n// axios.get('http://127.0.0.1:3000', {\n//     // get\u8bf7\u6c42\u643a\u5e26\u7684\u67e5\u8be2\u53c2\u6570\n//     params: {\n//         cur: 5,\n//         size: 10\n//     }\n// })\n// \u65b9\u5f0f3\naxios({\n  method: \"GET\",\n  url: \"http://127.0.0.1:3000\",\n  // get\u8bf7\u6c42\u643a\u5e26\u7684\u67e5\u8be2\u53c2\u6570\n  params: {\n    cur: 15,\n    size: 10,\n  },\n}).then((res) => {\n  console.log(res.data);\n});\n// \u65b9\u5f0f4\nconst sid = 2022;\naxios.get(`http://127.0.0.1:3000/users/${sid}`);\n")),(0,o.kt)("p",null,"\u200b post \u8bf7\u6c42"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'// 1. axios \u7684 post \u8bf7\u6c42\u53c2\u6570\naxios({\n  method: "POST",\n  url: "http://localhost:3000/demo",\n  // \u8bf7\u6c42\u4f53\u7684\u643a\u5e26\n  // data: {\n  //     name: \'\u8303\u96ea\u6885\',\n  //     age: 12\n  // }\n  // \u81ea\u52a8\u8bc6\u522b\u4e3a x-www-form-urlencoded\n  data: "name=\u767d\u5929\u6210&age=42",\n}).then((data) => {\n  console.log(data);\n});\n// \u65b9\u5f0f2\n// \u53c2\u65702\u81f3\u76f4\u63a5\u662f\u8bf7\u6c42\u4f53\uff0c\u4e0d\u9700\u8981data\u58f0\u660e\naxios.post("http://localhost:3000/demo?id=10", {\n  name: "\u8fea\u4e3d\u70ed\u5df4",\n  age: 20,\n});\n')),(0,o.kt)("h3",{id:"axios-\u7684\u5c01\u88c5"},"axios \u7684\u5c01\u88c5"),(0,o.kt)("p",null,"\u200b \u4ee5\u540e\u7684\u4f01\u4e1a\u9879\u76ee\uff0c\u90fd\u9700\u8981\u6a21\u5757\u5316\uff0c\u7ec4\u4ef6\u5316\uff0c\u4e5f\u5c31\u662f\u5f53\u524d\u7684\u6587\u4ef6\u5982\u679c\u53ea\u5199\u4e00\u6b21\uff0c\u90a3\u4e48\u5176\u4ed6\u7684\u540c\u4e8b\u8fd8\u5f97\u518d\u5199"),(0,o.kt)("p",null,"\u200b \u4e0d\u662f\u5728\u529f\u80fd\u4e0a\u6709\u4efb\u4f55\u5c01\u88c5\u7684\u52a8\u4f5c\uff0c\u57fa\u4e8e axios \u4f1a\u8fdb\u884c\u4e8c\u6b21\u5c01\u88c5\uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u66f4\u52a0\u65b9\u4fbf\u7684\u8c03\u7528\uff0c\u548c\u5904\u7406\u914d\u7f6e\u4fe1\u606f"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'// 1. \u914d\u7f6e\u4fe1\u606f\n// baseURL   timeout    headers\n// 1. \u521b\u5efa\u8bf7\u6c42\u7684\u5b9e\u4f8b\nconst service = axios.create({\n  // \u57fa\u672c\u8def\u5f84 - \u516c\u5171\u8def\u5f84\n  baseURL: "http://localhost:3000",\n  // \u8bf7\u6c42\u8d85\u65f6\n  timeout: 10 * 1000,\n  // \u8bf7\u6c42\u5934\n  headers: {\n    // \u8bf7\u6c42\u5934\u643a\u5e26\u7684\u5185\u5bb9\n    demo: "random string",\n  },\n  // \u643a\u5e26\u4e00\u4e9b\u516c\u5171\u5b57\u6bb5 - \u67e5\u8be2\u53c2\u6570\n  params: {\n    app_id: "qjwkhneqigkkujok",\n    app_secret: "VjNDVmIrZFkvaGhNdElPbmQxQzRhUT09",\n  },\n});\n\n// 2. \u8bbe\u7f6e\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u62e6\u622a\u5668\n// 2.1 \u8bf7\u6c42\u62e6\u622a\u5668\nservice.interceptors.request.use(\n  (config) => {\n    // 2.1.1 \u6bcf\u6b21\u8bf7\u6c42\u90fd\u4f1a\u5f00\u542f\u8fdb\u5ea6\u6761\u7684\u5c55\u793a\n    NProgress.start();\n\n    // 2.1.3 \u643a\u5e26\u5176\u4ed6\u7684\u8bf7\u6c42\u5934\u5185\u5bb9\n    const token = localStorage.getItem("token");\n    config.headers["Authorazition"] = token;\n\n    return config;\n  },\n  // \u7edf\u4e00\u5904\u7406\u8bf7\u6c42\u62e6\u622a\u7684\u9519\u8bef\n  (err) => {\n    return Promise.reject(err);\n  }\n);\n\n// 2.2 \u54cd\u5e94\u62e6\u622a\u5668\nservice.interceptors.response.use(\n  (res) => {\n    // \u5173\u95ed\u8fdb\u5ea6\u6761\u7684\u63d0\u793a\n    NProgress.done();\n\n    // \u6839\u636e\u54cd\u5e94\u7684\u5185\u5bb9\u5224\u65ad\u662f\u5426\u62e5\u6709\u7ed3\u679c\uff0c\u7136\u540e\u7ed9\u4e0d\u540c\u7684\u7ec4\u4ef6\u63d0\u793a\n\n    return res.data;\n  },\n  (err) => {\n    // \u5173\u95ed\u8fdb\u5ea6\u6761\u7684\u63d0\u793a\n    NProgress.done();\n    return Promise.reject(err);\n  }\n);\n')))}d.isMDXComponent=!0}}]);